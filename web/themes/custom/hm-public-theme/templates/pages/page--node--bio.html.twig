<div class="page-wrapper">
  {% include directory ~ '/partials/header.html.twig' %}
  {{ page.navigation }}
  {{ page.highlighted }}

  <div class="row">
    <div class="col-sm-12 column">{{ page.banner }}</div>
  </div>

  <div class="row layout--1-2col-3-9">
    <main class="main">
      <a id="main-content" tabindex="-1"></a>
      <div class="container row">
        {# Social Media Share #}
        <section>
          <h2 class="sr-only">Share on Social Media</h2>
          <ul class="share">
            <li>
              <a href="https://www.facebook.com/sharer/sharer.php?u={{ url('<current>') }}" target="_blank">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  preserveAspectRatio="xMidYMid meet"
                  viewBox="0 0 72 72"
                  class="share__icon">
                    <path fill-rule="evenodd" fill="#3E5F99"
                    d="M72.001,36.000 C72.001,55.883 55.883,72.001 36.000,72.001 C16.116,72.001 -0.002,55.883 -0.002,36.000 C-0.002,16.116 16.116,-0.002 36.000,-0.002 C55.883,-0.002 72.001,16.116 72.001,36.000 ZM46.025,14.527 L39.445,14.527 C39.406,14.527 38.383,14.565 38.383,14.565 C34.703,14.601 32.881,16.766 32.881,16.766 C29.998,19.458 30.415,22.494 30.415,22.494 L30.415,28.336 L25.862,28.336 L25.862,35.921 L30.415,35.921 L30.415,57.471 L39.406,57.471 L39.406,35.962 L45.477,35.962 L46.008,28.298 L39.406,28.298 L39.406,23.782 C39.406,21.505 41.379,21.439 41.379,21.439 L46.025,21.439 L46.025,14.527 Z"/>
                </svg>
                <img class="share__image" src="{{file_url(node.field_bio_image.entity.uri.value)}}" alt="Profile image of {{ node.title.value }}">
              </a>
            </li>
            <li>
              <a href="https://twitter.com/home?status={{ url('<current>') }}" target="_blank">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  viewBox="0 0 72 72"
                  class="share__icon">
                    <path fill-rule="evenodd" fill="#2BACE5"
                      d="M72.001,36.000 C72.001,55.883 55.885,72.002 36.000,72.002 C16.118,72.002 -0.002,55.883 -0.002,36.000 C-0.002,16.116 16.118,-0.002 36.000,-0.002 C55.885,-0.002 72.001,16.116 72.001,36.000 ZM63.755,34.582 C61.889,34.900 59.186,34.570 57.751,33.974 C60.729,33.727 62.745,32.373 63.522,30.535 C62.451,31.196 59.115,31.916 57.278,31.230 C57.184,30.797 57.086,30.387 56.983,30.015 C55.585,24.860 50.783,20.708 45.752,21.210 C46.157,21.045 46.569,20.892 46.986,20.752 C47.535,20.555 50.788,20.023 50.275,18.878 C49.841,17.867 45.872,19.637 45.124,19.870 C46.110,19.501 47.744,18.862 47.918,17.727 C46.407,17.934 44.923,18.650 43.775,19.691 C44.192,19.245 44.504,18.702 44.570,18.115 C40.538,20.696 38.183,25.892 36.277,30.936 C34.781,29.483 33.452,28.340 32.262,27.702 C28.924,25.913 24.931,24.042 18.666,21.714 C18.475,23.789 19.692,26.549 23.197,28.384 C22.439,28.281 21.048,28.510 19.940,28.775 C20.391,31.153 21.870,33.112 25.875,34.060 C24.043,34.179 23.096,34.598 22.240,35.494 C23.074,37.148 25.110,39.094 28.765,38.694 C24.698,40.449 27.106,43.699 30.415,43.215 C24.772,49.052 15.873,48.619 10.761,43.739 C24.104,61.942 53.110,54.503 57.432,36.972 C60.672,36.999 62.573,35.850 63.755,34.582 Z"/>
                </svg>
              </a>
            </li>
            <li>
              <a href="mailto:?&subject=Check out this biography from The HistoryMakers featuring {{ node.title.value }}&body=Hello!%20I%20would%20like%20to%20share%20this%20HistoryMaker's%20story%20with%20you.%0A%0A{{ url('<current>') }}%0A%0ACheck%20out%20more%20stories%20at%20https%3A//thehistorymakers.org">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  viewBox="0 0 72 72"
                  class="share__icon">
                    <path fill-rule="evenodd" fill="#7FBC61"
                      d="M72.001,36.000 C72.001,55.882 55.883,72.001 36.000,72.001 C16.116,72.001 -0.002,55.882 -0.002,36.000 C-0.002,16.115 16.116,-0.002 36.000,-0.002 C55.883,-0.002 72.001,16.115 72.001,36.000 ZM56.045,23.334 L15.954,23.334 L15.954,23.613 C15.954,23.937 16.241,24.604 16.474,24.827 L35.999,43.402 L55.524,24.827 C55.758,24.607 56.044,23.937 56.045,23.613 L56.045,23.334 ZM56.045,41.209 L56.045,29.532 L49.907,35.372 L56.045,41.209 ZM15.954,41.209 L22.092,35.372 L15.954,29.532 L15.954,41.209 ZM15.954,48.664 L56.045,48.664 L56.045,47.130 C56.045,46.807 55.758,46.137 55.523,45.914 L47.174,37.972 L38.404,46.314 C37.758,46.929 36.904,47.268 36.000,47.268 C35.095,47.268 34.241,46.929 33.594,46.314 L24.825,37.972 L16.475,45.914 C16.242,46.137 15.955,46.807 15.954,47.130 L15.954,48.664 Z"/>
                </svg>
              </a>
            </li>
          </ul>
        </section>
        {# End Social Media Share #}

        <div class="col-sm-5 col-md-3 info__column">
          <section class="">
            <h2 class="sr-only">Information about {{ node.title.value }}</h2>

            {# Bio Image #}
            <div class="info">
              <div>
                <img class="info__headshot" src="{{file_url(node.field_bio_image.entity.uri.value)}}" alt="Profile image of {{ node.title.value }}">
                {% if logged_in %}
                  <div class="info__favorites">
                    {{ drupal_view('flag_favorites', 'block_1') }}
                  </div>
                {% endif %}
              </div>
              {{ field_bio_image }}

              <div class="desktop-only">

                {# Interview Date(s) #}
                {% if node.field_interview_date[0].value %}
                  <section>
                    <h3 class="info__profession">Interview Date{% if node.field_interview_date|length > 1 %}s{% endif %}</h3>
                    <dd>
                    {% for key, value in node.field_interview_date|reverse(true) %}
                      {{ node.field_interview_date[key].value|date("F j, Y") }}<br />
                    {% endfor %}
                    </dd>
                  </section>
                {% endif %}
                {# End Interview Date(s) #}

                {# Profession #}
                <section>
                  <h3 class="info__profession">Profession</h3>
                  <dl>
                    <dt>Category:</dt>
                    <dd>
                        {% for key, value in node.field_maker_category %}
                          {{ node.field_maker_category[key].entity.label }}<br />
                        {% endfor %}
                    </dd>

                    <dt>Occupation(s):</dt>
                    <dd>
                      {% for key, value in node.field_occupation %}
                        {{ node.field_occupation[key].entity.label }}<br />
                      {% endfor %}
                    </dd>

                  </dl>
                </section>
                {# End Profession #}

                {# Favorites #}
                <section>
                  <h3>Favorites</h3>
                  <dl>
                    {% if node.field_favorite_color.value %}
                      <dt>Favorite Color:</dt>
                      <dd>{{ node.field_favorite_color.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_food.value %}
                      <dt>Favorite Food:</dt>
                      <dd>{{ node.field_favorite_food.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_season.value %}
                      <dt>Favorite Time of Year:</dt>
                      <dd>{{ node.field_favorite_season.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_vacation.value %}
                      <dt>Favorite Vacation Spot:</dt>
                      <dd>{{ node.field_favorite_vacation.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_quote.value %}
                      <dt>Favorite Quote:</dt>
                      <dd>{{ node.field_favorite_quote.value | striptags }}</dd>
                    {% endif %}
                  </dl>
                </section>
                {# End Favorites #}

                {# Birthplace #}
                {% if node.field_birth_date[0].value  %}
                <section>
                  <h3>Birthplace</h3>
                  <dl>
                    <dt>Born:</dt>
                    <dd>{{ node.field_birth_date[0].value }}</dd>

                    {% if node.field_birth_place_term[0].entity.label %}
                      <dt>Birth Location:</dt>
                      <dd>{{ node.field_birth_place_term[0].entity.label }}, {{ node.field_state[0].value }}</dd>
                    {% endif %}

                  </dl>
                </section>
                {% endif %}
                {# End Birthplace #}

              </div>{# <div class="desktop-only"> #}
            </div>{# <div class="info"> #}
          </section>


          {# Mobile only #}
          <div class="accordion mobile-only-details">
            <button class="accordion__panel collapsed" type="button" data-toggle="collapse" data-target="#aboutInfo" aria-expanded="true" aria-controls="aboutInfo">
                About {{ node.title.value }}
                <span class="accordion__arrow">
                    <span class="accordion__arrow-half"></span>
                    <span class="accordion__arrow-half"></span>
                </span>
            </button>

            <div class="accordion__body collapse show" id="aboutInfo">
              <div class="card-block info">

                  {# Begin Interview Date(s) #}
                  {% if node.field_interview_date[0].value %}
                    <section>
                      <h3 class="info__profession">Interview Date{% if node.field_interview_date|length > 1 %}s{% endif %}</h3>
                      <dd>
                      {% for key, value in node.field_interview_date|reverse(true) %}
                        {{ node.field_interview_date[key].value|date("F j, Y") }}<br />
                      {% endfor %}
                      </dd>
                    </section>
                  {% endif %}
                  {# End Interview Date(s) #}

                  {# Begin Profession #}
                  <section>
                  <h3 class="info__profession">Profession</h3>
                  <dl>
                    <dt>Category:</dt>
                    <dd>
                        {% for key, value in node.field_maker_category %}
                          {{ node.field_maker_category[key].entity.label }}<br />
                        {% endfor %}
                    </dd>

                    <dt>Occupation(s):</dt>
                    <dd>
                      {% for key, value in node.field_occupation %}
                        {{ node.field_occupation[key].entity.label }}<br />
                      {% endfor %}
                    </dd>

                  </dl>
                </section>
                {# End Profession #}

                {# Favorites #}
                <section>
                  <h3>Favorites</h3>
                  <dl>
                    {% if node.field_favorite_color.value %}
                      <dt>Favorite Color:</dt>
                      <dd>{{ node.field_favorite_color.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_food.value %}
                      <dt>Favorite Food:</dt>
                      <dd>{{ node.field_favorite_food.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_season.value %}
                      <dt>Favorite Time of Year:</dt>
                      <dd>{{ node.field_favorite_season.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_vacation.value %}
                      <dt>Favorite Vacation Spot:</dt>
                      <dd>{{ node.field_favorite_vacation.value }}</dd>
                    {% endif %}

                    {% if node.field_favorite_quote.value %}
                      <dt>Favorite Quote:</dt>
                      <dd>{{ node.field_favorite_quote.value | striptags }}</dd>
                    {% endif %}
                  </dl>
                </section>
                {# End Favorites #}

                {# Birthplace #}
                {% if node.field_birth_date[0].value  %}
                <section>
                  <h3>Birthplace</h3>
                  <dl>
                    <dt>Born:</dt>
                    <dd>{{ node.field_birth_date[0].value }}</dd>

                    {% if node.field_birth_place_term[0].entity.label %}
                      <dt>Birth Location:</dt>
                      <dd>{{ node.field_birth_place_term[0].entity.label }}</dd>
                    {% endif %}

                  </dl>
                </section>
                {% endif %}
                {# End Birthplace #}
              </div>
            </div>
          </div>

          {# Related Makers #}
          <section class="discover desktop-only">
            {#{{ page.content.relatedmakersblock }}#}
            <a class="button button--primary" href="/related-to/{{ node.id }}">See how {{ node.title.value }} is related to other HistoryMakers</a>
            {# Donate Button 1 #}
            <a class="button button--quaternary" href="/related-to/117977">Donate Now</a>
          </section>
        </div>{# <div class="row"> #}

        <div class="bio__column col-sm-7 col-md-9">
          <div class="row">

            {# Body #}
            <section class="col-sm bio-detail__main-content">
              <h2>Biography</h2>
              {% autoescape %}
                <p>{{ node.body.value|raw|nl2br }}</p>
              {% endautoescape %}
            </section>

            {# Sponsored by #}
            {% if node.field_sponsor.value %}
            <section class="col-sm-3 sponsor">
              <h2>Sponsored by {{ node.field_sponsor.value }}</h2>
              {% if node.field_event_title_sponsor.entity.uri.value != 'public://300x300' %}
                <div>
                  <img class="sponsor__img" src="{{ file_url(node.field_event_title_sponsor.entity.uri.value) }}" alt="{{ node.field_sponsor.value|escape }}">
                </div>
              {% endif %}
            </section>
            {% endif %}

          </div>{# <div class="row"> #}

          {# Mobile Related Makers #}
          <section class="discover mobile-only-details">
            {#{{ page.content.relatedmakersblock }}#}
            <a class="button button--primary" href="/related-to/{{ node.id }}">See how {{ node.title.value }} is related to other HistoryMakers</a>
          </section>

          {# Video Selections #}
          {% if node.field_web_clip1.value %}
          <section>
            <div class="accordion">
              <button class="accordion__panel" type="button" data-toggle="collapse" data-target="#videoInAccordion" aria-expanded="true" aria-controls="videoInAccordion">
                Selected Video Oral History Segments
                <span class="accordion__arrow">
                  <span class="accordion__arrow-half"></span>
                  <span class="accordion__arrow-half"></span>
                </span>
              </button>

              <div class="accordion__body collapse show" id="videoInAccordion">
                  <div class="card-block">
                    {{ drupal_block('bio_video_player_block') }}
                  </div>
              </div>
            </div>
          </section>
          {% endif %}
          {# End Video Selections #}
          {% if node.field_thm_da_link[0].url|length > 0 %}
          <a class="button button--primary bio-detail__da-button" href="{{  node.field_thm_da_link[0].url}}" target="_blank">Click Here To Explore The Archive Today!</a>
          {%  endif %}
          {#  List of DA Stories #}
          {% if node.field_dastories|length > 0 %}

            <div class="accordion bio-detail__accordion">
              <button class="accordion__panel collapsed" type="button" data-toggle="collapse" data-target="#storyList" aria-expanded="false" aria-controls="storyList">
                List of Stories in The HistoryMakers Digital Archive
                <span class="accordion__arrow">
                    <span class="accordion__arrow-half"></span>
                    <span class="accordion__arrow-half"></span>
                </span>
              </button>

              <div class="collapse accordion__body" id="storyList">
                {#  Create array of arrays of DA Links #}
                {% set tapes = {} %}
                {% for key, value in node.field_dastories %}
                  {% set string1=node.field_dastories[key].value|split('e: ') %}
                  {% set string2=string1[1]|split(' ') %}
                  {% set field_name = "Tape: "~string2[0] %}
                  {% if not attribute(tapes, field_name) is defined %}
                    {% set tapes = tapes|merge({ (field_name) : [node.field_dastories[key].value] }) %}
                  {# else update the dynamic property with the new title #}
                  {% else %}
                    {% set new_tape = attribute(tapes, field_name) %}
                    {% set new_tape = new_tape|merge([node.field_dastories[key].value]) %}
                    {% set tapes = tapes|merge({ (field_name) : new_tape }) %}
                  {% endif %}
                {% endfor %}
                {# dump(tapes) #}
                {% for key,value in tapes %}
                  <div>
                  <h3>{{ key }}</h3>
                  <ul>
                  {% for key1,value1 in value %}
                    <li>{{ value1 | replace({(key):'', '\\': ''}) | raw }}</li>
                  {% endfor %}
                  </ul>
                  </div>
                {% endfor %}
              </div>
            </div>
          {% endif %}
          {#  End List of DA Stories #}

          {# Learning Aids #}
          {% if node.field_bio_pdf.value %}

          <div class="accordion">
            <button class="accordion__panel collapsed" type="button" data-toggle="collapse" data-target="#findingAids" aria-expanded="false" aria-controls="findingAids">
                Interview Description (Finding Aids)
                <span class="accordion__arrow">
                    <span class="accordion__arrow-half"></span>
                    <span class="accordion__arrow-half"></span>
                </span>
            </button>

            <div class="collapse accordion__body" id="findingAids">
              <div>
                <ul>
                  {% for key, value in node.field_bio_pdf %}
                    <li><a href="{{file_url(node.field_bio_pdf[key].entity.uri.value)}}" target="_blank">{{ node.field_bio_pdf[key].entity.filename.value }}</a></li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
          {% endif %}
          {# End Learning Aids #}

          {# Archival Photos #}
          {% if node.field_archival_image1.entity.uri.value %}

          <div class="accordion">
            <button class="accordion__panel collapsed" type="button" data-toggle="collapse" data-target="#archivePhotos" aria-expanded="false" aria-controls="archivePhotos">
                Archival Photos
                <span class="accordion__arrow">
                    <span class="accordion__arrow-half"></span>
                    <span class="accordion__arrow-half"></span>
                </span>
            </button>

            <div class="collapse accordion__body" id="archivePhotos">
              <div class="archive">
                <div class="row">
                  <div class="col-sm-6">
                    <img class="archive__photo" src="{{file_url(node.field_archival_image1.entity.uri.value)}}" alt="">
                  </div>
                  <div class="col-sm-6">
                    <img class="archive__photo" src="{{file_url(node.field_archival_image2.entity.uri.value)}}" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endif %}
          {# End Archival Photos #}

        </div>

        {# Back to top button #}
        <button class="back-button scroll" title="Back to top">
          <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          preserveAspectRatio="xMidYMid meet"
          viewBox="0 0 23 12"
          width='11px'>
          <path fill-rule="evenodd"  fill="rgb(146, 28, 33)"
          d="M11.501,0.007 L23.002,12.011 L0.001,12.011 L11.501,0.007 Z"/>
          </svg>
            Back to Top
        </button>
        </div>
      </div>{# <div class="container"> #}

    </main>{# <main class="main"> #}
  </div>{# Close layout--1-2col-3-9 #}
</div>{# Close page-wrapper #}

{% include directory ~ '/partials/footer.html.twig' %}
